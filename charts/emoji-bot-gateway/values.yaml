# Default values for emoji-bot-gateway.

nameOverride: ""
fullnameOverride: ""

image:
  repository: ghcr.io/soli0222/emoji-bot-gateway
  pullPolicy: IfNotPresent
  # Overrides the image tag whose default is the chart appVersion.
  tag: ""

imagePullSecrets: []
serviceAccount:
  create: true
  annotations: {}
  name: ""

podAnnotations: {}
podSecurityContext: {}
securityContext: {}

service:
  type: ClusterIP
  port: 3000

resources: {}

nodeSelector: {}
tolerations: []
affinity: {}

# Application specific configuration
config:
  # Misskey Configuration
  misskeyHost: "misskey.example.com"
  
  # Renderer Base URL (emoji-renderer service)
  rendererBaseUrl: "http://emoji-renderer:8109"
  
  # OpenAI Configuration
  openaiModel: "gpt-5-mini-2025-08-07"
  
  # Server Configuration
  port: 3000
  logLevel: "info"
  
  # Rate Limiting
  rateLimitMaxRequests: 10
  rateLimitWindowSeconds: 60
  
  # State TTL (seconds)
  stateTtlSeconds: 600

  # Sensitive values - use existingSecret or set these
  # If existingSecret is set, it will be used and these values will be ignored.
  # The existing secret must have keys: misskey-token, openai-api-key, valkey-password (optional)
  existingSecret: ""
  
  # These are used if existingSecret is empty
  misskeyToken: ""
  openaiApiKey: ""
  valkeyPassword: ""

# Valkey configuration
valkey:
  enabled: true
  image:
    repository: valkey/valkey
    tag: "9.0.2-alpine3.23"
    pullPolicy: IfNotPresent
  service:
    port: 6379
  persistence:
    enabled: true
    size: 1Gi
    storageClass: ""
    accessMode: ReadWriteOnce
  resources: {}

externalValkey:
  host: ""
  port: 6379
  password: ""

# Ingress configuration
ingress:
  enabled: false
  className: ""
  annotations: {}
    # kubernetes.io/ingress.class: nginx
    # kubernetes.io/tls-acme: "true"
  hosts:
    - host: emoji-bot.example.tld
      paths:
        - path: /
          pathType: ImplementationSpecific
  tls: []
  #  - secretName: emoji-bot-tls
  #    hosts:
  #      - emoji-bot.example.tld

# Metrics configuration
# Note: Metrics are served on the same port as the app at /metrics endpoint
metrics:
  enabled: true
  serviceMonitor:
    enabled: false
    interval: 30s
    scrapeTimeout: 10s
    labels: {}
